<Window
    x:Class="ITTicketingKiosk.SettingsDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Application Settings"
    Width="650"
    Height="700"
    WindowStartupLocation="CenterOwner"
    Background="White"
    ResizeMode="NoResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Content Area -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="20">
            <StackPanel>
                <!-- PowerSchool Section -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="PowerSchool API Configuration" 
                               FontSize="18" 
                               FontWeight="Bold"
                               Foreground="{StaticResource AccentTextBrush}"
                               Margin="0,0,0,15"/>

                    <TextBlock Text="Configure PowerSchool API credentials for device lookup."
                               TextWrapping="Wrap"
                               Foreground="{StaticResource SecondaryTextBrush}"
                               FontSize="12"
                               Margin="0,0,0,10"/>

                    <StackPanel>
                        <TextBlock Text="Client ID" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="PSClientIdTextBox" 
                                 Style="{StaticResource StandardTextBoxStyle}"
                                 FontFamily="Consolas"
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="Client Secret" FontWeight="SemiBold" Margin="0,5,0,5"/>
                        <PasswordBox x:Name="PSClientSecretBox" 
                                     Style="{StaticResource StandardPasswordBoxStyle}"
                                     FontFamily="Consolas"
                                     Margin="0,0,0,10"/>
                    </StackPanel>
                </StackPanel>

                <!-- Separator -->
                <Border BorderBrush="{StaticResource BorderBrush}" 
                        BorderThickness="0,1,0,0"
                        Margin="0,10,0,20"/>

                <!-- NinjaOne Section -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="NinjaOne API Configuration" 
                               FontSize="18" 
                               FontWeight="Bold"
                               Foreground="{StaticResource AccentTextBrush}"
                               Margin="0,0,0,15"/>

                    <TextBlock TextWrapping="Wrap"
                               Foreground="{StaticResource SecondaryTextBrush}"
                               FontSize="12"
                               Margin="0,0,0,10">
                        <Run Text="Configure NinjaOne OAuth credentials. After saving, you will be prompted to sign in and authorize the application."/>
                    </TextBlock>

                    <StackPanel>
                        <TextBlock Text="Client ID" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="NinjaClientIdTextBox" 
                                 Style="{StaticResource StandardTextBoxStyle}"
                                 FontFamily="Consolas"
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="Client Secret" FontWeight="SemiBold" Margin="0,5,0,5"/>
                        <PasswordBox x:Name="NinjaClientSecretBox" 
                                     Style="{StaticResource StandardPasswordBoxStyle}"
                                     FontFamily="Consolas"
                                     Margin="0,0,0,10"/>

                        <TextBlock Text="Organization ID" FontWeight="SemiBold" Margin="0,5,0,5"/>
                        <TextBox x:Name="NinjaOrgIdTextBox" 
                                 Style="{StaticResource StandardTextBoxStyle}"
                                 FontFamily="Consolas"
                                 Margin="0,0,0,10"/>
                    </StackPanel>
                </StackPanel>

                <!-- Separator -->
                <Border BorderBrush="{StaticResource BorderBrush}" 
                        BorderThickness="0,1,0,0"
                        Margin="0,10,0,20"/>

                <!-- Security Note -->
                <Border Background="#FFF4CE"
                        BorderBrush="#E3BB5F"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="12"
                        Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="🔒 Security Information" 
                                   FontWeight="SemiBold"
                                   FontSize="13"
                                   Margin="0,0,0,5"/>
                        <TextBlock TextWrapping="Wrap" 
                                   FontSize="11"
                                   Foreground="{StaticResource SecondaryTextBrush}">
                            <Run Text="Credentials are securely stored in Windows Credential Manager and encrypted by the operating system. They are only accessible by this application and your Windows user account."/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Clear Credentials Section -->
                <StackPanel>
                    <TextBlock Text="Advanced Options" 
                               FontSize="14" 
                               FontWeight="SemiBold"
                               Margin="0,0,0,10"/>

                    <Button x:Name="ClearCredentialsButton"
                            Content="Clear All Stored Credentials"
                            Click="ClearCredentialsButton_Click"
                            Style="{StaticResource SecondaryButtonStyle}"
                            HorizontalAlignment="Left"
                            Margin="0,0,0,10"/>

                    <TextBlock Text="This will remove all stored credentials including the refresh token. You will need to re-enter all credentials and sign in again."
                               TextWrapping="Wrap"
                               FontSize="11"
                               Foreground="{StaticResource SecondaryTextBrush}"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Button Area -->
        <Border Grid.Row="1" 
                BorderBrush="{StaticResource BorderBrush}" 
                BorderThickness="0,1,0,0"
                Background="{StaticResource HeaderBackgroundBrush}"
                Padding="20,15">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Right">
                <Button x:Name="SaveButton"
                        Content="Save"
                        Click="SaveButton_Click"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Width="100"
                        Margin="0,0,10,0"/>
                <Button x:Name="CancelButton"
                        Content="Cancel"
                        Click="CancelButton_Click"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Width="100"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
